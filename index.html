<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase Kapcsolat Teszt</title>
    <!-- Tailwind CSS a minimális stílushoz -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 flex items-center justify-center min-h-screen">
    
    <div class="bg-white p-8 rounded-xl shadow-2xl w-full max-w-lg text-center">
        <h1 class="text-3xl font-bold mb-4 text-blue-600">Firebase Kapcsolat Teszt</h1>
        
        <!-- Statusz kijelző elem -->
        <div id="status-message" class="p-4 rounded-lg bg-gray-100 text-gray-700 font-mono">
            Kapcsolódás a Firebase-hez...
        </div>
        
        <!-- Felhasználói ID kijelző -->
        <p class="mt-4 text-sm text-gray-500">
            Felhasználó ID (UID): <span id="user-id" class="font-bold text-gray-800">Várakozás...</span>
        </p>
    </div>

    <!-- Firebase szkriptek -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        // A Firestore-ra nincs szükség a teszthez, de ha kellene, itt a helye:
        // import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- FIREBASE KONFIGURÁCIÓ (KÉRLEK CSERÉLD LE A '...' RÉSZT A VALÓDI KULCSODRA!) ---
        const firebaseConfig = {
            apiKey: "AIzaSyC...QDQvZnag2g1pTB4MWKWjrjEIn0Q", 
            authDomain: "rezsi-nyilvantarto.firebaseapp.com",
            projectId: "rezsi-nyilvantarto",
            storageBucket: "rezsi-nyilvantarto.firebasestorage.app",
            messagingSenderId: "917315288002",
            appId: "1:917315288002:web:8633213d831cbd6fe3f45b",
            measurementId: "G-RNXJ4MXTQY"
        };
        
        // DOM elemek elérése
        const statusEl = document.getElementById('status-message');
        const userIdEl = document.getElementById('user-id');

        async function initializeAndAuthenticate() {
            try {
                // 1. Inicializálás
                const app = initializeApp(firebaseConfig);
                const auth = getAuth(app);
                
                statusEl.textContent = 'Firebase inicializálás sikeres. Anonim bejelentkezés...';

                // 2. Anonim Bejelentkezés
                const result = await signInAnonymously(auth);
                const userID = result.user.uid;

                // 3. Sikeres frissítés
                statusEl.textContent = 'SIKERES FIREBASE BEJELENTKEZÉS! (Auth működik)';
                statusEl.classList.remove('bg-gray-100');
                statusEl.classList.add('bg-green-100', 'text-green-700', 'font-bold');
                userIdEl.textContent = userID;

                console.log("Firebase Teszt: SIKERES. UID:", userID);

            } catch (error) {
                // 4. Hiba
                statusEl.textContent = 'HIBA! Nem sikerült a Firebase bejelentkezés. Ellenőrizd az API kulcsot és a konfigurációt!';
                statusEl.classList.remove('bg-gray-100');
                statusEl.classList.add('bg-red-100', 'text-red-700', 'font-bold');
                userIdEl.textContent = 'HIBA: ' + error.message;

                console.error("Firebase Teszt: HIBA", error);
            }
        }

        // Fő funkció elindítása
        initializeAndAuthenticate();
    </script>
</body>
</html>
